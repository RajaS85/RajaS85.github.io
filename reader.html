<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading Story | Manhwa Factory</title>
    <link rel="icon" type="image/png" href="https://img.icons8.com/fluency/48/source-code.png">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&display=swap" rel="stylesheet">
</head>
<body class="bg-dark text-white">

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top border-bottom border-secondary">
        <div class="container-fluid px-4">
            <a class="navbar-brand logo d-flex align-items-center" href="index.html">
                <img src="https://img.icons8.com/fluency/32/source-code.png" alt="Logo" class="me-2">
                RS<span style="color: #FFB400;">.</span>
            </a>

            <div id="google_translate_element" class="ms-3"></div>

            <div class="ms-auto">
                <a href="manhwa.html" class="btn btn-outline-warning btn-sm">‚Üê Back to Factory</a>
            </div>
        </div>
    </nav>

    <div class="container mt-5 mb-5">
        <div class="card p-5 shadow-lg mx-auto" style="max-width: 850px; background: #1a1a1a; border: 1px solid #333; border-radius: 15px;">
            <div class="text-center mb-4">
                <h1 id="readTitle" class="display-4 fw-bold" style="color: #FFB400;">Loading Title...</h1>
                <p id="readAuthor" class="lead text-muted italic"></p>
                <hr class="border-secondary opacity-50">
            </div>

            <div id="readContent" class="lh-lg" style="font-size: 1.25rem; white-space: pre-wrap; font-family: 'Inter', sans-serif;">
                Loading the story content...
            </div>
        </div>
    </div>

    <script type="text/javascript">
        function googleTranslateElementInit() {
          new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <script src="script.js"></script>

    <script>
        // Logic to grab the Story ID from the URL and fetch data from Firebase
        const params = new URLSearchParams(window.location.search);
        const storyId = params.get('id');

        if (storyId) {
            db.collection("stories").doc(storyId).get().then(doc => {
                if (doc.exists) {
                    const data = doc.data();
                    document.getElementById('readTitle').innerText = data.title;
                    document.getElementById('readAuthor').innerText = "Written by " + (data.author || "Anonymous");
                    // .innerHTML is used here to render the Bold/Italic/Emoji formatting from your Notepad
                    document.getElementById('readContent').innerHTML = data.content;
                    
                    // Update Page Title
                    document.title = data.title + " | Manhwa Factory";
                } else {
                    document.getElementById('readContent').innerHTML = "<h3>Error: Story not found.</h3>";
                }
            }).catch(error => {
                console.error("Error getting story:", error);
                document.getElementById('readContent').innerHTML = "<h3>Error loading story.</h3>";
            });
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
